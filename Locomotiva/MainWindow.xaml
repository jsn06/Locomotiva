<Window x:Class="Locomotiva.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="450" Width="800">
    <Window.Resources>
        <!-- Template da roda -->
        <ControlTemplate x:Key="LocomotiveWheelTemplate" TargetType="ContentControl">
            <Grid Width="60" Height="60" RenderTransformOrigin="0.5,0.5">
                <Grid.RenderTransform>
                    <RotateTransform x:Name="WheelRotate"/>
                </Grid.RenderTransform>
                <Ellipse Fill="Black" Stroke="Gray" StrokeThickness="3"/>
                <Ellipse Fill="Gray" Width="40" Height="40" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                <Canvas>
                    <Line X1="30" Y1="10" X2="30" Y2="50" Stroke="DarkGray" StrokeThickness="3"/>
                    <Line X1="10" Y1="30" X2="50" Y2="30" Stroke="DarkGray" StrokeThickness="3"/>
                    <Line X1="15" Y1="15" X2="45" Y2="45" Stroke="DarkGray" StrokeThickness="2"/>
                    <Line X1="45" Y1="15" X2="15" Y2="45" Stroke="DarkGray" StrokeThickness="2"/>
                </Canvas>
            </Grid>
        </ControlTemplate>
    </Window.Resources>
    <Grid>
        <!-- Locomotiva -->
        <Canvas x:Name="LocomotiveCanvas" Width="540" Height="250" HorizontalAlignment="Left" Panel.ZIndex="1">
            <Canvas.RenderTransform>
                <TranslateTransform x:Name="LocomotiveTranslate"/>
            </Canvas.RenderTransform>
            <!-- Defletor frontal (cowcatcher) -->
            <Polygon Fill="SlateGray" Points="80,170 100,210 100,130" />
            <!-- Corpo principal -->
            <Rectangle Fill="Black" Width="320" Height="80" RadiusX="15" RadiusY="15"
                       Canvas.Left="100" Canvas.Top="90"/>
            <!-- Detalhe lateral do corpo -->
            <Rectangle Fill="#333" Width="60" Height="60" RadiusX="10" RadiusY="10"
                       Canvas.Left="120" Canvas.Top="100" Opacity="0.3"/>
            <!-- Cabine com topo arredondado -->
            <Rectangle Fill="DimGray" Width="80" Height="80"
                       Canvas.Left="340" Canvas.Top="50"/>
            <Ellipse Fill="DimGray" Width="80" Height="30"
                     Canvas.Left="340" Canvas.Top="35"/>
            <!-- Janela da cabine -->
            <Rectangle Fill="LightSkyBlue" Width="30" Height="35" RadiusX="6" RadiusY="6"
                       Canvas.Left="370" Canvas.Top="65" Stroke="White" StrokeThickness="2"/>
            <!-- Chaminé -->
            <Rectangle Fill="Black" Width="25" Height="50"
                       Canvas.Left="130" Canvas.Top="40"/>
            <Ellipse Fill="Gray" Width="35" Height="15"
                     Canvas.Left="125" Canvas.Top="30"/>
            <!-- Luz frontal -->
            <Ellipse Fill="Gold" Width="18" Height="18"
                     Canvas.Left="90" Canvas.Top="120" Stroke="DarkGoldenrod" StrokeThickness="2"/>
            <!-- Frente inclinada (defletor lateral) -->
            <Polygon Fill="SlateGray" Points="100,170 100,130 80,150"/>
            <!-- Rodas alinhadas e espaçadas -->
            <ContentControl x:Name="Wheel1" Template="{StaticResource LocomotiveWheelTemplate}"
                            Canvas.Left="120" Canvas.Top="170"/>
            <ContentControl x:Name="Wheel2" Template="{StaticResource LocomotiveWheelTemplate}"
                            Canvas.Left="220" Canvas.Top="170"/>
            <ContentControl x:Name="Wheel3" Template="{StaticResource LocomotiveWheelTemplate}"
                            Canvas.Left="320" Canvas.Top="170"/>
            <!-- Bielas (braço de conexão entre as rodas) -->
            <Rectangle x:Name="Biela" Fill="DarkGray" Height="10" Width="220"
                       RadiusX="3" RadiusY="3"
                       RenderTransformOrigin="0,0.5"
                       Canvas.Left="150" Canvas.Top="200">
                <Rectangle.RenderTransform>
                    <TransformGroup>
                        <RotateTransform x:Name="BielaRotate"/>
                        <TranslateTransform x:Name="BielaTranslate"/>
                    </TransformGroup>
                </Rectangle.RenderTransform>
            </Rectangle>
        </Canvas>
    </Grid>
</Window>
